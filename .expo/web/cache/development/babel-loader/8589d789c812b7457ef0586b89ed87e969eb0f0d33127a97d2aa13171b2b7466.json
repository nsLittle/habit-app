{"ast":null,"code":"var _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\nvar _require = require(\"../models/User\"),\n  User = _require.User;\nvar jwt = require(\"jsonwebtoken\");\nexports.signup = function () {\n  var _ref = _asyncToGenerator(function* (req, res) {\n    try {\n      var user = yield User.create(req.body);\n      res.status(201).json({\n        message: 'User created successfully',\n        user: user\n      });\n    } catch (error) {\n      res.status(400).json({\n        error: error.message\n      });\n    }\n  });\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexports.login = function () {\n  var _ref2 = _asyncToGenerator(function* (req, res) {\n    try {\n      var _req$body = req.body,\n        email = _req$body.email,\n        password = _req$body.password;\n      var user = yield User.findOne({\n        email: email\n      });\n      if (user && (yield user.comparePassword(password))) {\n        var token = jwt.sign({\n          id: user._id\n        }, process.env.JWT_SECRET, {\n          expiresIn: process.env.JWT_EXPIRES_IN\n        });\n        res.status(200).json({\n          token: token\n        });\n      } else {\n        res.status(401).json({\n          message: \"Invalid credentials\"\n        });\n      }\n    } catch (error) {\n      res.status(400).json({\n        error: error.message\n      });\n    }\n  });\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["_require","require","User","jwt","exports","signup","_ref","_asyncToGenerator","req","res","user","create","body","status","json","message","error","_x","_x2","apply","arguments","login","_ref2","_req$body","email","password","findOne","comparePassword","token","sign","id","_id","process","env","JWT_SECRET","expiresIn","JWT_EXPIRES_IN","_x3","_x4"],"sources":["/Users/nslittle/Desktop/Life/coding/habit-app/server/controllers/authController.js"],"sourcesContent":["const { User } = require('../models/User');\nconst jwt = require(\"jsonwebtoken\");\n\nexports.signup = async (req, res) => {\n  try {\n    const user = await User.create(req.body);\n    res.status(201).json({ message: 'User created successfully', user });\n  } catch (error) {\n    res.status(400).json({ error: error.message });\n  }\n};\n\nexports.login = async (req, res) => {\n  try {\n    const { email, password } = req.body;\n    const user = await User.findOne({ email });\n\n    if (user && (await user.comparePassword(password))) {\n      const token = jwt.sign({ id: user._id }, process.env.JWT_SECRET, {\n        expiresIn: process.env.JWT_EXPIRES_IN,\n      });\n      res.status(200).json({ token });\n    } else {\n      res.status(401).json({ message: \"Invalid credentials\" });\n    }\n  } catch (error) {\n    res.status(400).json({ error: error.message });\n  }\n};"],"mappings":";AAAA,IAAAA,QAAA,GAAiBC,OAAO,iBAAiB,CAAC;EAAlCC,IAAI,GAAAF,QAAA,CAAJE,IAAI;AACZ,IAAMC,GAAG,GAAGF,OAAO,CAAC,cAAc,CAAC;AAEnCG,OAAO,CAACC,MAAM;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,GAAG,EAAEC,GAAG,EAAK;IACnC,IAAI;MACF,IAAMC,IAAI,SAASR,IAAI,CAACS,MAAM,CAACH,GAAG,CAACI,IAAI,CAAC;MACxCH,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE,2BAA2B;QAAEL,IAAI,EAAJA;MAAK,CAAC,CAAC;IACtE,CAAC,CAAC,OAAOM,KAAK,EAAE;MACdP,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEE,KAAK,EAAEA,KAAK,CAACD;MAAQ,CAAC,CAAC;IAChD;EACF,CAAC;EAAA,iBAAAE,EAAA,EAAAC,GAAA;IAAA,OAAAZ,IAAA,CAAAa,KAAA,OAAAC,SAAA;EAAA;AAAA;AAEDhB,OAAO,CAACiB,KAAK;EAAA,IAAAC,KAAA,GAAAf,iBAAA,CAAG,WAAOC,GAAG,EAAEC,GAAG,EAAK;IAClC,IAAI;MACF,IAAAc,SAAA,GAA4Bf,GAAG,CAACI,IAAI;QAA5BY,KAAK,GAAAD,SAAA,CAALC,KAAK;QAAEC,QAAQ,GAAAF,SAAA,CAARE,QAAQ;MACvB,IAAMf,IAAI,SAASR,IAAI,CAACwB,OAAO,CAAC;QAAEF,KAAK,EAALA;MAAM,CAAC,CAAC;MAE1C,IAAId,IAAI,WAAWA,IAAI,CAACiB,eAAe,CAACF,QAAQ,CAAC,CAAC,EAAE;QAClD,IAAMG,KAAK,GAAGzB,GAAG,CAAC0B,IAAI,CAAC;UAAEC,EAAE,EAAEpB,IAAI,CAACqB;QAAI,CAAC,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,EAAE;UAC/DC,SAAS,EAAEH,OAAO,CAACC,GAAG,CAACG;QACzB,CAAC,CAAC;QACF3B,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEc,KAAK,EAALA;QAAM,CAAC,CAAC;MACjC,CAAC,MAAM;QACLnB,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEC,OAAO,EAAE;QAAsB,CAAC,CAAC;MAC1D;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdP,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEE,KAAK,EAAEA,KAAK,CAACD;MAAQ,CAAC,CAAC;IAChD;EACF,CAAC;EAAA,iBAAAsB,GAAA,EAAAC,GAAA;IAAA,OAAAhB,KAAA,CAAAH,KAAA,OAAAC,SAAA;EAAA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}